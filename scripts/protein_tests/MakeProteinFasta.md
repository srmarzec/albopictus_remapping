# Make a fasta with specific protein

These are just some notes and not finalized

# Get protein fasta for *Aedes albopitus*
Took protein fasta and annotation file from ncbi for AAlbF2 (which is Aedes albopictus annotation release 102; accession number GCF_006496715.1) (upload date stated is 2019-08-06 20:54). We do not have a version of this for our genome since it's so freaking new.
```
curl -LO https://ftp.ncbi.nlm.nih.gov/genomes/all/annotation_releases/7160/102/GCF_006496715.1_Aalbo_primary.1/GCF_006496715.1_Aalbo_primary.1_protein.faa.gz
gunzip GCF_006496715.1_Aalbo_primary.1_protein.faa.gz
rm GCF_006496715.1_Aalbo_primary.1_protein.faa.gz
```

# Make a table of gene IDs and protein IDs from the *Aedes albopictus* genome annotation file (gff3)

Pull all lines that actually have a protein ID from the gff3 file, separate based on semi-colon, pull out the gene and protein_id and get rid of the rest, paste them together, and put it all in a txt file
```
grep 'protein_id' aedes_albopictus_AalbF3.gff3 | tr ";" "\n" | grep -E '^(gene|protein_id)' | cut -d '=' -f 2 | paste - - > gene_proteinID_list.txt
```


# Make subsetted fasta

Bring up gene list from local computer (generated by getting DEGs after running DESeq)
```
gcloud compute scp /Users/sarah/OneDrive/Documents/Mosquito/Remapping_RNASeq/htseq-count/misc/11D_DvND_test.txt bananas-controller:/home/sm3679/albopictus_remap/albopictus_genome
```
Make list of unique proteins associated with the gene list of your choice 
```
grep -w -F -f 11D_DvND_test.txt gene_proteinID_list.txt | awk '{ print $2 }' > 11D_sigDEG_protein.txt
sort 11D_sigDEG_protein.txt | uniq > 11D_sigDEG_protein_unique.txt
rm 11D_sigDEG_protein.txt
```
Use samtools to subset the original/main protein fasta by the specific protein list
```
module load samtools/1.9
samtools faidx GCF_006496715.1_Aalbo_primary.1_protein.faa -r 11D_sigDEG_protein_unique.txt -o 11D_sigDEG_protein.faa
```
You can bring back the fasta list to local computer if you want
```
gcloud compute scp bananas-controller:/home/sm3679/albopictus_remap/albopictus_genome/11D_sigDEG_protein.faa /Users/sarah/OneDrive/Documents/Mosquito/Remapping_RNASeq/protein_stuff
```
